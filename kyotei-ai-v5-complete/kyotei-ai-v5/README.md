# 🚤 競艇予想AI v5.0

**高精度・期待値重視の競艇予想システム**

## ✨ 特徴

- ✅ **前節今節成績を含む多層的データ取得**
- ✅ **高信頼性スクレイピング**（誤読み取り防止機構）
- ✅ **レース分類**（安定/混戦/荒れ）
- ✅ **AI予測**（本命/中穴/大穴の3段階）
- ✅ **期待値ベースの券種最適化**
- ✅ **見送り判定**（期待値マイナスは推奨しない）
- ✅ **React PWA**（スマホ対応）
- ✅ **完全無料で運用可能**

---

## 🎯 目標

**ROI 110%以上**（既存サイトを超える精度）

---

## 🚀 クイックスタート

### 必要な環境

- Python 3.11以上
- Node.js 18以上

### 1. バックエンド起動

```bash
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
python api/server.py
```

### 2. フロントエンド起動

別のターミナルで：

```bash
cd frontend
npm install
npm run dev
```

### 3. アクセス

```
http://localhost:3000
```

---

## 📚 ドキュメント

- **[完全要件定義](docs/KYOTEI_AI_V5_COMPLETE_REQUIREMENTS.md)** - すべての仕様
- **[構築手順](BUILD_GUIDE.md)** - 詳細な構築方法

---

## 🏗️ アーキテクチャ

```
┌─────────────────┐
│  React PWA      │  ← ユーザーインターフェース
│  (Frontend)     │
└─────────────────┘
        ↓
┌─────────────────┐
│  Flask API      │  ← データ統合 + AI予測
│  (Backend)      │
└─────────────────┘
        ↓
┌─────────────────┐
│  競艇公式サイト  │  ← リアルタイムデータ取得
└─────────────────┘
```

---

## 📂 ディレクトリ構造

```
kyotei-ai-v5/
├─ backend/          # Flask API
│  ├─ api/           # APIエンドポイント
│  ├─ engines/       # データ統合・予測・最適化
│  ├─ models/        # 特徴量・AIモデル
│  └─ utils/         # スクレイパー
│
├─ frontend/         # React PWA
│  └─ src/
│     ├─ pages/      # ページコンポーネント
│     ├─ api/        # APIクライアント
│     └─ App.jsx     # メインアプリ
│
├─ data/             # データストレージ
│  ├─ racers/        # 選手データ
│  ├─ daily/         # 当日データ
│  └─ models/        # AIモデル
│
└─ docs/             # ドキュメント
```

---

## 💡 使い方

1. **競艇場を選択**（例: 大村）
2. **レース番号を選択**（例: 12R）
3. **「分析開始」をクリック**
4. **30秒待つ**（最新データ取得中）
5. **分析結果を確認**
   - レース分類（安定/混戦/荒れ）
   - 推奨買い目
   - 期待値
   - 見送り判定
6. **テレボートで投票**（手動）

---

## 🔧 カスタマイズ

### APIのURL変更

**frontend/.env.local**:
```
VITE_API_URL=https://your-api.com
```

### ポート変更

**backend/api/server.py**:
```python
app.run(port=8000)
```

**frontend/vite.config.js**:
```javascript
server: { port: 4000 }
```

---

## 🌐 デプロイ

### バックエンド

**Render（無料）:**
1. GitHubリポジトリを接続
2. `render.yaml` を使用
3. 自動デプロイ

### フロントエンド

**GitHub Pages（無料）:**
```bash
cd frontend
npm run build
# dist/ フォルダをデプロイ
```

---

## 📊 データの流れ

```
Layer 1: 選手マスタ（週1更新）
  ↓
Layer 2: 前節今節成績（毎日更新）
  ↓
Layer 3: 当日データ（毎朝更新）
  ↓
Layer 4: 直前データ（ユーザーアクセス時）
  ↓
AI予測 → 期待値計算 → 見送り判定 → 結果表示
```

---

## 🎲 レース分類

### 安定レース（70点以上）
- 実力通りの結果が出やすい
- 戦略: 本命1点 + 保険
- 期待値: +30-50%

### 混戦レース（40-70点）
- 実力が拮抗
- 戦略: 軸流し 5-10点
- 期待値: +15-30%

### 荒れレース（40点未満）
- 波乱の可能性大
- 戦略: 大穴狙い or 見送り
- 期待値: +50%以上 or 見送り

---

## 🔐 セキュリティ

- ✅ 公式サイトのみ使用
- ✅ 適度なアクセス頻度（1-2秒間隔）
- ✅ User-Agent設定
- ❌ 自動投票なし（規約遵守）

---

## 📝 免責事項

本システムは予想支援ツールです。
- 的中を保証するものではありません
- 投資は自己責任でお願いします
- ギャンブル依存症にご注意ください

---

## 🤝 サポート

### 問題が発生した場合

1. [BUILD_GUIDE.md](BUILD_GUIDE.md) を確認
2. [完全要件定義](docs/KYOTEI_AI_V5_COMPLETE_REQUIREMENTS.md) を確認
3. GitHubでIssueを作成

---

## 📈 ロードマップ

- [x] 基本システム完成
- [ ] データ収集の自動化（GitHub Actions）
- [ ] AIモデルの訓練
- [ ] 統計機能の追加
- [ ] グラフ表示機能
- [ ] 結果登録機能

---

## 📄 ライセンス

このプロジェクトは個人利用・学習目的です。

---

**作成日:** 2025年11月10日  
**バージョン:** 5.0.0  
**完璧なアプリケーション完成！** 🎉
